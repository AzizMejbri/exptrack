{"openapi":"3.0.1","info":{"title":"Expense Tracker Backend API","description":"## Authentication\nThis API uses **cookie-based JWT authentication**:\n\n| Cookie Name      | Purpose                           |\n|-----------------|-----------------------------------|\n| `access_token`   | Short-lived JWT for authentication |\n| `refresh_token`  | Long-lived JWT to refresh access  |\n\nTokens are refreshed automatically using the endpoints below.\n\n## Public (No Auth Required)\nThese endpoints can be called without any authentication:\n\n- **POST /auth/login** — Login with email & password\n- **POST /auth/signup** — Create a new user account\n\n## Protected (Requires `access_token` Cookie)\nAll other endpoints require the user to be authenticated:\n\n- **POST /auth/login/refresh** — Refresh access & refresh tokens\n- **POST /auth/login/refresh-access** — Refresh access token only\n- **POST /auth/logout** — Log out the current user\n- **GET /auth/me** — Get currently authenticated user info\n- **All `/api/users/**` endpoints** — Transactions, Expenses, Revenues, Reports, Analytics\n","version":"1.0.0"},"servers":[{"url":"https://localhost:8443","description":"Generated server url"}],"paths":{"/api/users/{userId}/transactions/{transactionId}":{"put":{"tags":["transaction-controller"],"summary":"Update a transaction","description":"Updates an existing transaction by its ID and type.","operationId":"updateTransaction","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"transactionId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"query","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}},"required":true},"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}},"200":{"description":"Transaction updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"security":[{"cookieAuth":[]}]},"delete":{"tags":["transaction-controller"],"summary":"Delete a transaction","description":"Deletes a transaction by its ID and type.","operationId":"deleteTransaction","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"transactionId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"403":{"description":"Access denied"},"204":{"description":"Transaction deleted"}},"security":[{"cookieAuth":[]}]}},"/auth/signup":{"post":{"tags":["sign-up-controller"],"summary":"Register a new user","description":"Creates a new user account in the system.\n\n**Request Body:**\n- `email` (string): user's email, must be unique\n- `username` (string): desired username\n- `password` (string): account password\n\n**Response:**\n- 200: User created successfully, returns created user and message\n- 417: Signup failed, returns error message\n\n**Public Endpoint:** No authentication required\n","operationId":"handleSignup","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"200":{"description":"User created successfully","content":{"application/json":{"schema":{"type":"string","example":{"message":"user created","user":{"id":1,"email":"user@example.com","username":"myusername"}}}}}},"417":{"description":"Signup failed","content":{"application/json":{"schema":{"type":"string","example":{"message":"Email already exists"}}}}}}}},"/auth/logout":{"post":{"tags":["login-controller"],"summary":"Logout user","description":"Deletes the access and refresh tokens from cookies, effectively logging out the user.","operationId":"logout","responses":{"200":{"description":"Logged out successfully","content":{"application/json":{}}}},"security":[{"cookieAuth":[]}]}},"/auth/login":{"post":{"tags":["login-controller"],"summary":"Login user","description":"Authenticates a user using email and password.\nOn success:\n- Sets `access_token` and `refresh_token` as HttpOnly cookies\n- Returns JSON containing user id and username\n","operationId":"handleLogin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful, tokens set in cookies","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"401":{"description":"Invalid email or password","content":{"application/json":{}}}}}},"/auth/login/refresh":{"post":{"tags":["login-controller"],"summary":"Refresh JWT token pair","description":"Uses the provided refresh token to generate a new pair of access and refresh tokens.\nSets the new access token as a HttpOnly cookie.\n","operationId":"refresh","requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"200":{"description":"Tokens refreshed successfully","content":{"application/json":{}}},"401":{"description":"Invalid refresh token","content":{"application/json":{}}}}}},"/auth/login/refresh-access":{"post":{"tags":["login-controller"],"summary":"Refresh access token","description":"Uses a refresh token to refresh the access token only.\nReturns the new access token in the response body.\n","operationId":"refreshAccessToken","requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}},"required":true},"responses":{"401":{"description":"Cannot refresh token or invalid refresh token","content":{"application/json":{}}},"200":{"description":"Access token refreshed successfully","content":{"application/json":{}}}}}},"/api/users/{userId}/transactions":{"get":{"tags":["transaction-controller"],"summary":"Get all transactions for a user","description":"Fetches transactions for a given user, with optional timeframe, limit, and pagination.","operationId":"getTransactions","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"month"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"200":{"description":"List of transactions returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"security":[{"cookieAuth":[]}]},"post":{"tags":["transaction-controller"],"summary":"Add a new transaction","description":"Creates a new transaction for the specified user.","operationId":"addTransaction","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}},"required":true},"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}},"201":{"description":"Transaction created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/reports/generate":{"post":{"tags":["transaction-controller"],"summary":"Generate report","description":"Generates a PDF or Excel report based on the request body parameters.","operationId":"generateReport","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequestDTO"}}},"required":true},"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"type":"string","format":"byte"}}}}},"200":{"description":"Report generated","content":{"*/*":{"schema":{"type":"array","items":{"type":"string","format":"byte"}}}}}},"security":[{"cookieAuth":[]}]}},"/auth/me":{"get":{"tags":["login-controller"],"summary":"Get current authenticated user","description":"Returns the details of the currently authenticated user.","operationId":"me","responses":{"401":{"description":"User not authenticated","content":{"application/json":{}}},"200":{"description":"User retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/summary":{"get":{"tags":["transaction-controller"],"summary":"Get transaction summary","description":"Returns a summary of transactions for a user over a given timeframe.","operationId":"getTransactionSummary","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"month"}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TransactionSummaryDTO"}}}},"200":{"description":"Transaction summary returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionSummaryDTO"}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/reports/income-statement":{"get":{"tags":["transaction-controller"],"summary":"Income statement report","description":"Returns the user's income statement between start and end dates.","operationId":"getIncomeStatement","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"$ref":"#/components/schemas/IncomeStatementDTO"}}}},"200":{"description":"Income statement returned","content":{"*/*":{"schema":{"$ref":"#/components/schemas/IncomeStatementDTO"}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/reports/expense":{"get":{"tags":["transaction-controller"],"summary":"Expense report","description":"Returns an expense report between given start and end dates.","operationId":"getExpenseReport","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ExpenseReportDTO"}}}}},"200":{"description":"Expense report returned","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ExpenseReportDTO"}}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/recent":{"get":{"tags":["transaction-controller"],"summary":"Get recent transactions","description":"Fetch the most recent transactions for a user, limited by count.","operationId":"getRecentTransactions","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":5}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"200":{"description":"List of recent transactions returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/categories/summary":{"get":{"tags":["transaction-controller"],"summary":"Get category summary","description":"Returns summary statistics grouped by transaction categories.","operationId":"getCategorySummary","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"month"}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategorySummaryDTO"}}}}},"200":{"description":"Category summary returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategorySummaryDTO"}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/categories/stats":{"get":{"tags":["transaction-controller"],"summary":"Get category statistics","description":"Returns detailed stats for categories, including counts, sums, and averages.","operationId":"getCategoryStats","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"month"}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"200":{"description":"Category stats returned","content":{"application/json":{}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/analysis/trend":{"get":{"tags":["transaction-controller"],"summary":"Trend analysis","description":"Returns trend analysis of user's transactions over a given timeframe.","operationId":"getTrendAnalysis","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"monthly"}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TrendAnalysisDTO"}}}}},"200":{"description":"Trend analysis returned","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TrendAnalysisDTO"}}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/transactions/analysis/budget-vs-actual":{"get":{"tags":["transaction-controller"],"summary":"Budget vs actual analysis","description":"Returns a comparison of budgeted amounts versus actual spending for a user.","operationId":"getBudgetVsActual","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"month"}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"200":{"description":"Budget vs actual returned","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/revenues":{"get":{"tags":["transaction-controller"],"summary":"Get user revenues","description":"Fetch only transactions of type 'revenue'.","operationId":"getRevenues","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"month"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"200":{"description":"List of revenues returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"security":[{"cookieAuth":[]}]}},"/api/users/{userId}/expenses":{"get":{"tags":["transaction-controller"],"summary":"Get user expenses","description":"Fetch only transactions of type 'expense'.","operationId":"getExpenses","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"timeFrame","in":"query","required":false,"schema":{"type":"string","default":"month"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":1}}],"responses":{"403":{"description":"Access denied","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"200":{"description":"List of expenses returned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionDTO"}}}}},"security":[{"cookieAuth":[]}]}}},"components":{"schemas":{"TransactionDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"amount":{"type":"number","format":"double"},"type":{"type":"string"},"category":{"type":"string"},"source":{"type":"string"},"description":{"type":"string"},"creationDate":{"type":"string","format":"date-time"},"lastModified":{"type":"string","format":"date-time"},"transactionType":{"type":"string"}}},"SignupRequest":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"UserDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"}}},"ReportRequestDTO":{"type":"object","properties":{"type":{"type":"string"},"startDate":{"type":"string"},"endDate":{"type":"string"},"format":{"type":"string"}}},"TransactionSummaryDTO":{"type":"object","properties":{"totalExpenses":{"type":"number","format":"double"},"totalRevenue":{"type":"number","format":"double"},"expenseCount":{"type":"integer","format":"int64"},"revenueCount":{"type":"integer","format":"int64"},"netAmount":{"type":"number","format":"double"},"period":{"type":"string"},"currency":{"type":"string"}}},"CategoryBreakdownDTO":{"type":"object","properties":{"name":{"type":"string"},"amount":{"type":"number","format":"double"},"percentage":{"type":"number","format":"double"}}},"IncomeStatementDTO":{"type":"object","properties":{"totalRevenue":{"type":"number","format":"double"},"totalExpenses":{"type":"number","format":"double"},"netIncome":{"type":"number","format":"double"},"grossMargin":{"type":"number","format":"double"},"categories":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/CategoryBreakdownDTO"}}}}},"ExpenseReportDTO":{"type":"object","properties":{"category":{"type":"string"},"totalAmount":{"type":"number","format":"double"},"transactionCount":{"type":"integer","format":"int64"},"averageAmount":{"type":"number","format":"double"},"percentage":{"type":"number","format":"double"},"monthlyBreakdown":{"type":"array","items":{"$ref":"#/components/schemas/MonthlyBreakdownDTO"}}}},"MonthlyBreakdownDTO":{"type":"object","properties":{"month":{"type":"string"},"amount":{"type":"number","format":"double"},"percentage":{"type":"number","format":"double"}}},"CategorySummaryDTO":{"type":"object","properties":{"name":{"type":"string"},"amount":{"type":"number","format":"double"},"type":{"type":"string"},"percentage":{"type":"number","format":"double"}}},"TrendAnalysisDTO":{"type":"object","properties":{"period":{"type":"string"},"totalAmount":{"type":"number","format":"double"},"percentageChange":{"type":"number","format":"double"},"trend":{"type":"string"},"forecast":{"type":"number","format":"double"}}}},"securitySchemes":{"cookieAuth":{"type":"apiKey","description":"JWT access token stored in HttpOnly cookie","name":"access_token","in":"cookie"}}}}